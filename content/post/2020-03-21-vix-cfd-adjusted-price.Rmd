---
title: vix-cfd-adjusted-price
author: ~
date: '2020-03-21'
slug: vix-cfd-adjusted-price
categories: []
tags: []
Categories:
  - Development
  - Golang
Description: ''
Tags:
  - development
  - golang
menu: ''
---
```{r}
vix <- getSymbols("^VIX",src="yahoo", from="1900-01-03", to=Sys.Date(), auto.assign=FALSE)
vix <- data.frame(index(vix),coredata(vix))
colnames(vix) <- c("date","open","high","low","close","volume","adjusted")
write.csv(vix, file = "c:\\tmp\\data\\VIX\\VIX.csv",row.names = F)

# usdjpy
usdjpy <- read.csv("C:\\tmp\\data\\quote\\quote.csv")
usdjpy$date <- as.Date(usdjpy$date)

getFX("USD/JPY")
tmp <- data.frame(date = index(USDJPY), close = coredata(USDJPY))
colnames(tmp) <- c("date", "USDJPY")
usdjpy <- rbind(usdjpy, tmp)
usdjpy <- usdjpy %>%
  distinct(date, .keep_all = TRUE) %>%
  arrange(date)
write.csv(usdjpy, "C:\\tmp\\data\\quote\\quote.csv", row.names = F)

# vixを円換算
tmp1 <- merge(vix, usdjpy, by = "date")
tmp1 <- tmp1 %>%
  mutate(close_jpy = close * USDJPY)

vix_cfd_adjusted_price <- read.csv("C:\\tmp\\data\\VIX\\vix_cfd_adjusted_price.csv")
vix_cfd_adjusted_price$date <- as.Date(vix_cfd_adjusted_price$date)
vix_cfd_adjusted_price <- melt(vix_cfd_adjusted_price, "date")

tmp1 <- merge(tmp1[,c(1,9)], vix_cfd_adjusted_price, by = "date")
colnames(tmp1) <- c("date", "vix_close_JPY", "variable", "adjusted_price")

ggplot(tmp1, aes(x = vix_close_JPY, y = adjusted_price, color = variable)) +
  geom_point() +
  geom_smooth(method = "lm")

```
